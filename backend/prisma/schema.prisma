// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma" 
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Category {
  Arithmetic
  Algebra
  Geometry
  Mixed
}

model User {
  id        String    @id @default(uuid())
  username  String    @unique
  email     String    @unique
  createdAt DateTime  @default(now())
  ratings   Json      @default("{\"arithmetic\": {\"rating\": 1200, \"gamesPlayed\": 0}, \"algebra\": {\"rating\": 1200, \"gamesPlayed\": 0}, \"geometry\": {\"rating\": 1200, \"gamesPlayed\": 0}, \"mixed\": {\"rating\": 1200, \"gamesPlayed\": 0}}")  
  stats     Json      @default("{\"highestWinStreaks\": {}, \"winLossRecords\": {}}")
}

model Question {
  id                  Int       @id @default(autoincrement())
  questionText        String
  category            Category
  ratingBucket        Int
  correctAnswer       String
  stepByStepSolution  String?   
  imageUrl            String?   
  createdAt           DateTime  @default(now())
  @@index([category, ratingBucket])
}